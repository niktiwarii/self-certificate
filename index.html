<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Self Promise Certificate ‚Äì Ultimate Edition</title>

<style>
:root{
  --accent:#ff4f9a;
  --accent2:#7c4dff;
  --gold:#ffcc66;
  --bg1:#ffd6e8;
  --bg2:#fff4f8;
  --card:#ffffff;
  --soft:#ffe1ee;
  --text:#2b2b2b;
}
*{box-sizing:border-box;font-family:Poppins,Segoe UI,sans-serif;}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex;align-items:center;justify-content:center;
  padding:20px;color:var(--text);
}

/* INTRO */
.intro{position:fixed;inset:0;background:linear-gradient(135deg,#ff5fa2,#7c4dff);display:flex;align-items:center;justify-content:center;z-index:1000}
.intro-card{background:#fff;padding:44px 34px;border-radius:34px;max-width:460px;text-align:center;animation:floatUp 1s ease}
.intro-card h1{color:#ff4f9a;margin-bottom:12px}
.intro-card p{color:#555;margin-bottom:26px;font-size:15px}
.start-btn{padding:16px 34px;border:none;border-radius:50px;font-size:16px;background:linear-gradient(135deg,#ff4f9a,#7c4dff);color:#fff;cursor:pointer;animation:pulse 2s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,79,154,.6)}70%{box-shadow:0 0 0 22px rgba(255,79,154,0)}100%{box-shadow:0 0 0 0 rgba(255,79,154,0)}}
@keyframes floatUp{from{transform:translateY(40px);opacity:0}to{transform:none;opacity:1}}

/* APP */
.app{width:100%;max-width:760px;background:var(--card);border-radius:36px;padding:34px;box-shadow:0 30px 90px rgba(0,0,0,.18);display:none}

h2{text-align:center;color:var(--accent)}
.subtitle{text-align:center;font-size:14px;color:#666;margin-bottom:22px}
label{font-weight:600;font-size:14px;margin-top:14px;display:block}
input,textarea{width:100%;padding:14px 16px;margin-top:6px;border-radius:18px;border:1px solid #ddd;font-size:14px;transition:.3s}
input:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px rgba(255,79,154,.15)}
textarea{resize:none;height:120px}
button{width:100%;padding:16px;border:none;border-radius:20px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;font-size:16px;margin-top:26px;cursor:pointer}

/* CERTIFICATE */
.certificate{display:none;margin-top:10px;padding:44px;border-radius:40px;background:linear-gradient(135deg,#fff,#fff0f6);border:5px solid var(--accent);position:relative}

/* Decorative graphics */
.certificate::before,.certificate::after{content:'';position:absolute;border-radius:50%;opacity:.28}
.certificate::before{width:180px;height:180px;background:var(--accent2);top:-70px;left:-70px}
.certificate::after{width:160px;height:160px;background:var(--gold);bottom:-60px;right:-60px}

.ribbon{position:absolute;top:-18px;right:-18px;background:linear-gradient(135deg,#ff4f9a,#7c4dff);color:#fff;padding:12px 24px;border-radius:0 28px 0 28px;font-size:13px;font-weight:600}

.medal{width:96px;height:96px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff,var(--gold));margin:0 auto 14px;display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
.medal span{font-size:36px}

.cert-title{text-align:center;font-size:30px;color:var(--accent);letter-spacing:1px}
.cert-year{text-align:center;font-size:14px;color:#777;margin-bottom:20px}
.promise-box{background:var(--soft);padding:24px;border-radius:24px;font-size:15px;line-height:1.8;position:relative}
.promise-box::before{content:'‚ù§';position:absolute;top:-12px;left:24px;background:#fff;padding:4px 8px;border-radius:50%;color:var(--accent)}
.signature{margin-top:28px;display:flex;justify-content:space-between;font-size:14px}
.sig-name{font-weight:700;color:var(--accent)}
.quote{text-align:center;margin-top:26px;font-size:13px;color:#666}

.qr-section{margin-top:26px;display:grid;grid-template-columns:1fr 1fr;gap:20px;text-align:center}
.qr-box{background:#fff;padding:14px;border-radius:18px;box-shadow:0 6px 18px rgba(0,0,0,.12)}
.qr-box p{font-size:12px;color:#666;margin:6px 0 0}
.qr-box img{width:120px;height:120px}

.music-box{margin-top:24px;background:#f7f7f7;padding:16px;border-radius:20px;text-align:center}
.music-box button{margin-top:10px;font-size:14px;padding:10px 16px;border-radius:14px}

.actions{margin-top:26px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
.actions button{font-size:14px}
.secondary{background:#eee;color:#333}
.share{background:linear-gradient(135deg,#00c6ff,#0072ff)}

canvas{border:2px dashed var(--accent);border-radius:14px;margin-top:10px}
@media print{.actions,.intro,.music-box{display:none}body{background:#fff}}
</style>
</head>
<body>

<!-- AUDIO -->
<audio id="bgMusic" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" preload="auto"></audio>
<audio id="celebrateMusic" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3" preload="auto"></audio>
<audio id="clickMusic" src="https://assets.mixkit.co/active_storage/sfx/2068/2068-preview.mp3" preload="auto"></audio>

<!-- INTRO -->
<div class="intro" id="intro">
  <div class="intro-card">
    <h1>‚ú® New Year Promise ‚ú®</h1>
    <p>Your year will be happier than the earlier.<br>Make a promise to yourself.</p>
    <button class="start-btn" id="startBtn">Enter My New Year</button>
  </div>
</div>

<!-- APP -->
<div class="app" id="app">

<div id="formSection">
<h2>My Promise</h2>
<div class="subtitle">Write it. Sign it. Believe it.</div>
<label>Name</label>
<input id="name">
<label>Year</label>
<input id="year" value="2026">
<label>Your Promise</label>
<textarea id="promise"></textarea>
<label>Draw Your Signature</label>
<canvas id="sign" width="300" height="100"></canvas>
<button id="createBtn">Create Certificate</button>
</div>

<div class="certificate" id="certificate">
<div class="ribbon">Self-Signed</div>
<div class="medal"><span>üèÜ</span></div>
<div class="cert-title">Promise Certificate</div>
<div class="cert-year" id="cy"></div>
<div class="promise-box" id="cp"></div>
<div class="signature">
<div>Signed by<br><span class="sig-name" id="cn"></span></div>
<div id="cd"></div>
</div>
<img id="sigImg" style="margin-top:16px;max-width:260px">

<div class="qr-section">
  <div class="qr-box">
    <img id="qrLink" />
    <p>Scan to view certificate</p>
  </div>
  <div class="qr-box">
    <img id="qrPromise" />
    <p>My written promise</p>
  </div>
</div>

<div class="music-box">
  <strong>üé∂ Celebration Music</strong>
  <p style="font-size:13px;color:#666">Play happiness again</p>
  <button onclick="celebrateMusic.play()">Play Celebration</button>
</div>

<div class="quote">‚ÄúConsistency is the purest form of self-love.‚Äù</div>
<div class="actions">
<button class="secondary" id="copyBtn">Copy Link</button>
<button class="share" id="shareBtn">Share</button>
<button onclick="window.print()">Save PDF</button>
</div>
</div>
</div>

<script>
const intro=document.getElementById('intro');
const app=document.getElementById('app');
const startBtn=document.getElementById('startBtn');
const createBtn=document.getElementById('createBtn');
const copyBtn=document.getElementById('copyBtn');
const shareBtn=document.getElementById('shareBtn');

const nameEl=document.getElementById('name');
const yearEl=document.getElementById('year');
const promiseEl=document.getElementById('promise');
const formSection=document.getElementById('formSection');
const certificate=document.getElementById('certificate');
const cn=document.getElementById('cn');
const cy=document.getElementById('cy');
const cp=document.getElementById('cp');
const cd=document.getElementById('cd');
const sigImg=document.getElementById('sigImg');
const qrLink=document.getElementById('qrLink');
const qrPromise=document.getElementById('qrPromise');

const bgMusic=document.getElementById('bgMusic');
const celebrateMusic=document.getElementById('celebrateMusic');
const clickMusic=document.getElementById('clickMusic');

startBtn.addEventListener('click',()=>{
  clickMusic.play();
  bgMusic.volume=0.3;bgMusic.play();
  intro.style.display='none';
  app.style.display='block';
});

// Signature
const canvas=document.getElementById('sign');
const ctx=canvas.getContext('2d');let drawing=false;
ctx.lineWidth=2;ctx.lineCap='round';
canvas.addEventListener('mousedown',()=>{drawing=true;ctx.beginPath()});
canvas.addEventListener('mouseup',()=>drawing=false);
canvas.addEventListener('mousemove',e=>{if(!drawing)return;ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke()});

// Create certificate
createBtn.addEventListener('click',()=>{
  if(!nameEl.value||!promiseEl.value){alert('Please fill all required fields');return}
  cn.textContent=nameEl.value;
  cy.textContent='Year: '+yearEl.value;
  cp.textContent=promiseEl.value;
  cd.textContent=new Date().toDateString();
  sigImg.src=canvas.toDataURL();

  const link=location.href.split('?')[0];
  qrLink.src=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(link)}`;
  qrPromise.src=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(promiseEl.value)}`;

  formSection.style.display='none';
  certificate.style.display='block';
  celebrateMusic.play();

  const data=btoa(JSON.stringify({n:nameEl.value,y:yearEl.value,p:promiseEl.value,s:sigImg.src}));
  history.replaceState({},'',`?data=${data}`);
});

copyBtn.addEventListener('click',()=>{
  navigator.clipboard.writeText(location.href);
  alert('Link copied!');
});

shareBtn.addEventListener('click',async()=>{
  if(navigator.share){
    await navigator.share({title:'My Promise Certificate',text:'I made a promise to myself for the new year ‚ú®',url:location.href});
  }else{navigator.clipboard.writeText(location.href);alert('Link copied!')}
});
</script>
</body>
</html>
