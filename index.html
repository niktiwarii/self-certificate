<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Self Promise Certificate – Ultimate</title>

<style>
:root{
  --accent:#ff4f9a;
  --accent2:#7c4dff;
  --gold:#ffcc66;
  --bg1:#ffd6e8;
  --bg2:#fff4f8;
  --soft:#ffe1ee;
}
*{box-sizing:border-box;font-family:Poppins,Segoe UI,sans-serif}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex;align-items:center;justify-content:center;
  padding:16px;
}

/* INTRO */
.intro{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
background:linear-gradient(135deg,#ff5fa2,#7c4dff);z-index:1000}
.intro-card{background:#fff;padding:40px;border-radius:30px;text-align:center;animation:intro .9s ease}
@keyframes intro{from{opacity:0;transform:translateY(40px)}}
.start-btn{
  padding:16px 36px;border:none;border-radius:50px;
  background:linear-gradient(135deg,#ff4f9a,#7c4dff);
  color:#fff;font-size:16px;cursor:pointer;
  animation:pulse 2s infinite
}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,79,154,.5)}70%{box-shadow:0 0 0 24px rgba(255,79,154,0)}}

/* APP */
.app{max-width:820px;width:100%;background:#fff;border-radius:36px;
padding:32px;box-shadow:0 30px 90px rgba(0,0,0,.2);display:none}
label{font-weight:600;margin-top:14px;display:block}
input,textarea{
  width:100%;padding:14px;border-radius:18px;border:1px solid #ddd
}
textarea{resize:none;height:120px}
button{
  width:100%;padding:16px;border:none;border-radius:20px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;margin-top:22px;cursor:pointer
}

/* SIGNATURE */
#sign{
  width:100%;max-width:300px;height:120px;
  border:2px dashed var(--accent);
  border-radius:14px;background:#fff;
  touch-action:none
}

/* CERTIFICATE */
.certificate{
  display:none;margin-top:26px;padding:42px;border-radius:30px;
  position:relative;
  background:
    linear-gradient(rgba(255,255,255,.9),rgba(255,255,255,.9)),
    url("https://images.unsplash.com/photo-1524995997946-a1c2e315a42f");
  background-size:cover;background-position:center;
  border:4px solid var(--accent);
  box-shadow:0 20px 60px rgba(0,0,0,.25);
  animation:cert .8s ease
}
@keyframes cert{from{opacity:0;transform:scale(.95)}}

.seal{
  position:absolute;top:-42px;left:50%;
  transform:translateX(-50%);
  width:90px
}

.cert-title{text-align:center;font-size:30px;color:var(--accent)}
.promise-box{
  background:var(--soft);padding:24px;border-radius:24px;margin-top:16px
}
.signature{display:flex;justify-content:space-between;margin-top:22px}
.actions{
  margin-top:26px;display:grid;
  grid-template-columns:1fr 1fr 1fr;gap:10px
}
.secondary{background:#eee;color:#333}
.share{background:linear-gradient(135deg,#00c6ff,#0072ff)}

.qr-section{
  margin-top:20px;display:grid;
  grid-template-columns:1fr 1fr;gap:14px;text-align:center
}
.qr-box{background:#fff;padding:12px;border-radius:16px}

@media(max-width:600px){
  .certificate{padding:24px}
}
</style>
</head>

<body>

<!-- AUDIO -->
<audio id="bgMusic" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>
<audio id="celebrateMusic" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<!-- INTRO -->
<div class="intro" id="intro">
  <div class="intro-card">
    <h1>✨ New Year Promise ✨</h1>
    <p>Your year will be happier than the earlier</p>
    <button class="start-btn" id="startBtn">Enter My Year</button>
  </div>
</div>

<div class="app" id="app">

<label>Name</label>
<input id="name">

<label>Year</label>
<input id="year" value="2026">

<label>Your Promise</label>
<textarea id="promise"></textarea>

<label>Signature</label>
<canvas id="sign"></canvas>

<button id="createBtn">Create Certificate</button>

<div class="certificate" id="certificate">

<img class="seal"
src="https://upload.wikimedia.org/wikipedia/commons/5/5a/Gold_seal.png">

<div class="cert-title">Promise Certificate</div>
<div class="promise-box" id="cp"></div>

<div class="signature">
  <div id="cn"></div>
  <div id="cd"></div>
</div>

<img id="sigImg" style="max-width:260px;margin-top:12px">

<div class="qr-section">
  <div class="qr-box"><img id="qrLink"></div>
  <div class="qr-box"><img id="qrPromise"></div>
</div>

<div class="actions">
  <button class="secondary" onclick="downloadImage()">Download Image</button>
  <button class="share" onclick="share()">Share</button>
  <button onclick="window.print()">PDF</button>
</div>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
const intro=document.getElementById('intro');
const app=document.getElementById('app');
const bgMusic=document.getElementById('bgMusic');
const celebrateMusic=document.getElementById('celebrateMusic');

startBtn.onclick=()=>{
  bgMusic.volume=0.3;
  bgMusic.play();
  intro.style.display='none';
  app.style.display='block';
};

// SIGNATURE (mobile + mouse)
const canvas=document.getElementById('sign');
const ctx=canvas.getContext('2d');
function resize(){
  const r=canvas.getBoundingClientRect();
  canvas.width=r.width;
  canvas.height=r.height;
}
resize();window.onresize=resize;

let draw=false;
canvas.onpointerdown=e=>{draw=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY)};
canvas.onpointermove=e=>{
  if(!draw)return;
  ctx.lineWidth=2;ctx.lineCap='round';ctx.strokeStyle='#ff4f9a';
  ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke()
};
canvas.onpointerup=()=>draw=false;

// CREATE
createBtn.onclick=()=>{
  cn.innerText=name.value;
  cp.innerText=promise.value;
  cd.innerText=new Date().toDateString();
  sigImg.src=canvas.toDataURL();

  qrLink.src=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${location.href}`;
  qrPromise.src=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${promise.value}`;

  certificate.style.display='block';
  celebrateMusic.play();
};

// IMAGE EXPORT (MOBILE SAFE)
function downloadImage(){
  const cert=document.getElementById('certificate');
  const oldWidth=cert.style.width;
  cert.style.width='800px';

  html2canvas(cert,{scale:3,useCORS:true}).then(c=>{
    const a=document.createElement('a');
    a.download='My_Promise_Certificate.png';
    a.href=c.toDataURL();
    a.click();
    cert.style.width=oldWidth;
  });
}

function share(){
  if(navigator.share){
    navigator.share({title:'My Promise Certificate',url:location.href});
  }else{
    navigator.clipboard.writeText(location.href);
    alert('Link copied');
  }
}
</script>
</body>
</html>
